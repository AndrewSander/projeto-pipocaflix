{% extends "base.html" %}

{% block title %} Todos os filmes {% endblock %}

{% block link %} ./static/css/filmes.css {% endblock %}

{% block content %}

<form method="GET" action="{{ url_for('main.listar_filmes') }}">
    <label for="ano">Ano:</label>
    <select name="ano">
        <option value="">Todos</option>
        {% for ano in anos %}
            <option value="{{ ano }}" {% if request.args.get('ano') == ano|string %}selected{% endif %}>{{ ano }}</option>
        {% endfor %}
    </select>

    <fieldset>
        <legend>Gênero:</legend>
        {% for genero in generos %}
            <option value="{{ ano }}" {% if request.args.get('ano') == ano|string %}selected{% endif %}>{{ ano }}</option>
        {% endfor %}
        {% for genero in generos %}
            <label>
                <input type="checkbox" name="genero" value="{{ genero.nome }}"{% if genero.nome in generos_selecionados %}checked{% endif %}>{{ genero.nome }}</label>
        {% endfor %}
    </fieldset>

    <label for="ordenar">Ordenar por:</label>
    <select name="ordenar">
        <option value="">Padrão</option>
        <option value="recente">Mais Recentes</option>
        <option value="avaliacao">Melhor Avaliados</option>
        <option value="alfabetico">Ordem alfabética</option>
    </select>

    <button type="submit">Filtrar</button>
</form>

{% if filmes %}
    <section class="filmes-series_page">
        <h1>Filmes</h1>
        <div class="filmes-series_grid">
            {% for filme in filmes %}
            <div class="filmes-series_card">
                <img src="../static/img/series/{{ filme.id }}/Capa.webp" alt="Capa">
                <h2>{{ filme.titulo }}</h>
                <p>{{ filme.sinopse }}</p>
                <a href="{{ url_for('main.series', filme_id=filme.id) }}">Ver Detalhes</a>
            </div>
            {% endfor %}
        </div>
    </section>
{% else %}
    <p>Nenhum filme encontrado.</p>
{% endif %}
{% endblock %}